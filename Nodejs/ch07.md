# 07 익스프레스 도우미, 미들웨어

## 7.1 자주 사용하는 미들웨어

#### 7.1.1 미들웨어란

- 미들웨어(middleware) : 요청과 응답 중간에 있으면서 요청을 처리하거나 원하는 형태로 응답을 수정하는 함수
- 미들웨어의 역할
  - 요청 전처리 : 요청이 서버에 도착하기 전에 실행하는 작업을 담당
  - 라우팅 처리 : 라우트 코드를 좀 더 읽기 쉽고 관리하기 쉽도록 모듈화
  - 응답 처리 : 서버에서 클라이언트로 응답을 보낼 때 자료를 적절한 형태로 변환하거나 오류를 처리하는 작업
- 애플리케이션 레벨 미들웨어 : 애플리케이션 단계에서 사용하는 미들웨어(app 객체에 get 함수나 post 함수를 사용해서 미들웨어를 처리)
  - 예 : ```app.get("/contacts", (req, res) => {...});```
- 라우터 미들웨어 : 라우터 객체를 사용한 미들웨어(혹은 라우터 객체 그 자체)
- app.use 함수 : 애플리케이션에서 실행할 미들웨어를 등록
  - 기본형 : ```app.use([경로], 미들웨어)```
  - 예 : ```app.use("/", require("./routes/loginRoutes"));```

#### 7.1.2 바디파서 미들웨어

- 바디파서(body-parser) 미들웨어 : 서버로 요청을 보낼 때 요청 본문(request body)에 담긴 것을 파싱하는 미들웨어
  - .json 함수 : JSON 형식의 본문을 파싱
  - .urlencoded 함수 : URL로 인코딩된 본문을 파싱
    - express.urlencoded 함수는 쿼리 스트링을 해석할 때 어떤 모듈을 사용할지 지정한다.
      - 쿼리 스트링(query string) : 사용자가 서버로 자료를 보낼 때 URL에 파라미터 형태로 포함시켜서 보내는 문자
  - .raw 함수 : 가공되지 않은 바이너리 자료를 파싱
  - .text 함수 : 텍스트 형식의 본문을 파싱

<hr>

## 7.2 미들웨어를 사용해 오류 처리하기

#### 7.2.1 상태 코드와 err 객체

<hr>

## 7.3 내 손으로 미들웨어 함수 직접 만들기

#### 7.3.1 next로 미들웨어 연결하기





